# ppp cli tool

ppp (Product Prompt Planner) is command line tool which is used to manage features and track product blacklog, tasks and bugs using well-structured folders and well-documented markdown files for ai assist tools like cursor , trae or claude code.

## Building Blocks
All PPP features are built on top of following building blocks:

### Config
**Config** is the building block that contains all the ppp settings. It is stored in `~/.ppp/settings.json` file. Users can configure their ppp settings in this file or by running `ppp config` command. Here are all the config items and their default values:
- llm_api_key: ""
- llm_api_url: "https://api.moonshot.cn/v1"
- llm_api_model: "kimi-k2-0711-preview"
- llm_api_temperature: 0.7
- llm_api_max_tokens: 1000
- llm_api_top_p: 1

### Issue
**Issue** is the abstraction of any work item in the product backlog. It can be a module/feature, a task, a bug, an epic, a user story, etc. All the detailed information about an issue is in its **Issue File** which is in the issue's parent folder, or in a **Issue Container Folder** which is in the issue's parent folder. Whether or not being in the **Issue Container Folder** depends on the issue type.

1. **Issue Attributes**
- **Issue ID**: Unique identifier for the issue.
- **Issue Type**: Module/Feature, Epic, User Story, Task, Bug, etc.
- **Issue Status**: New, In Progress, Done, etc.
- **Issue Priority**: High, Medium, Low, etc.
- **Issue Assignee**: Person responsible for the issue.
- **Issue Reporter**: Person who reported the issue.
- **Issue Labels**: Tags to categorize the issue.
- **Issue Description**: Detailed description of the issue.
- **Issue Comments**: Comments related to the issue.

2. **Issue ID** is unique identifier for an issue and is generated by ppp when issue is created. It  not only reference an issue in other ppp features (sprint tracking) but also generate markdown files name and folder names for the types of issue prompt documents. Here are the Issue ID generation rules by Issue Types:

  - **Prefix Char Meaning** These prefix characters are used to categorize the issue type by ppp and devs. As of now, they are fixed and maybe configurable in future. In terms of an issue's type, the issue ID is prefixed with following characters:
    - **Feature**: F
    - **Epic/User Story/Task**: T
    - **Bug**: B

  - **Rules of Issue ID Generation**
    1. **Common Rules**:
      - **ID Number Incrementation**: the ID digit part increases from 1, not 0. i.e. F01, F1101, the F00 and F1100 is prohibitive and reserved.
      - **Fixed Digits**: F01, F0101 and F010101 are legal, but F1, F011 and F01011 are illegal.

    2. **Feature ID**: Features are fixed to be in 3 layers:
      - layer 1 feature IDs gos with prefix plus 2-fixed-digits like F01, F02, ... F99. The F prefix means feature, the 2-digits means layer 1 features (the top-level feature).
      - layer 2 feature IDs gos with prefix plus 4-fixed-digits like F0101, F0101, .. F0199, F1201, F1202, ...F1299. The F prefix means feature, the first 2 digits is an internal ID part that means it is under the layer 1 features (the top-level feature), the last 2 digits is an internal ID part in it parent feature (layer 1 feature).
      - layer 3 feature IDs gos with prefix plus 6-fixed-digits like F010101, F010102, ...F010199, F010105, F120201. The F prefix means feature, the first 2 digits means it is under a specifc layer 1 feature, the second 2-digits is an internal ID part that means it is under a specific layer 2 feature, the last 2 digits is an internal ID part in its parent layer 2 feature.

    3. **Epic/User Story/Task ID**: The type of issues must be put under a specific feature doc folder and ID must be prefixed with a specific feature ID's digits part, and also be suffixed with an auto-incremented 2-digits number. i.e. if a user story belongs to a feature F0105, The user story ID goes like T010501, "0105" mean the user story belongs to feature F0105. if a user story belongs to feature F01, The user story ID goes like T0101, "01" mean the user story belongs to feature F01.

    4. **Bug ID**: Bugs must be put under a specific feature doc folder and ID must be prefixed with a specific feature/Epic/User Story/Task ID's digits part, and also be suffixed with an auto-incremented 2-digits number as what Epic/User Story/Task ID does. i.e. if a bug belongs to a feature F0105, The bug ID goes like B010501, "0105" mean the bug belongs to feature B0105. if a bug belongs to feature T010101, The bug ID goes like B010101, "01" mean the bug belongs to feature F0101.

  - **ID Generation System**: PPP uses a counter-based ID generation system that maintains auto-incrementing counters for each issue type and hierarchy level. The counters are stored in `.ppp/.counters.json` file and are automatically updated when new issues are created. This ensures unique IDs and prevents conflicts even when issues are created concurrently or when the file system is modified externally.


3. **Issue Name** is assigned by ppp user when issue is created. and its **Name Keywords** is genrated by ppp (which will use LLM API to genrate keywords from issue name configured by user in settings.json file in the future) and used by issue filing as file name.
  - **Name Keywords** is a list of keywords that are generated from issue name in course of issue filing. It is used to search for issues. It is also used to generate issue link in **sprint** markdown files. It is also used to generate issue link in commit messages.
  - **Issue Filing** is the course of issue creation. It includes issue file/folder name, issue file/folder content which will include issue ID, name, description, issue type, issue priority, issue assignee, issue reporter, issue labels, issue comments, etc.

4. **Issue File** is the file that contains all the issue related info. It is created when issue is created and managed by ppp during issue lifetime. **All issues create folders** for extensibility and consistency.
- Features: Its path is like `.ppp/<issue_container_folder>/spec.md`. i.e. `F01-admin/spec.md`, `F01-admin/F02-user_management/spec.md`, etc. It should includes all the issue attributes and other details of requrment and implemation in the md file.
- Epics/User Stories/Tasks: Its path is like `.ppp/<feature_folder>/<feature_folder>/<task_folder>/spec.md`. i.e. `F01-admin/T01-create_admin_ddl/spec.md`, `F01-admin/F01-user_management/T03-add_user/spec.md` and `F01-admin/F01-user_management/F02-add_user/T05-check_username/spec.md`. It should includes all the issue attributes and other details related the issue type in the md file.
- Bugs: Its path is like `.ppp/<feature_folder>/<feature_or_task_folder>/<bug_folder>/spec.md`. i.e. `F01-admin/F01-user_management/B03-cannot_load_feature_page/spec.md` and `F01-admin/F01-user_management/F02-add_user/B05-fail_to_submit/spec.md`. It should includes all the issue attributes and bug details in the md file.

5. **Issue Container Folder** is the feature folder that contains all the child issues related to the feature. It is created when feature is created and managed by ppp during feature lifetime. Its path is like `.ppp/<issue_container_folder>`. i.e. `F01_admin`, `F01_admin/F02_user_management`, etc.

### Sprint
**Sprint** is a time-boxed iteration to deliver a set of issues. All the detailed information about an sprint is in its **Sprint File** is located at `.ppp/<sprint_file>.md`. i.e. `Sprint-01.md`, `Sprint-02.md`, etc.

1. **Sprint Attributes**
- **Sprint Name**: Name of the sprint. i.e. Sprint 01, Sprint 02, etc.
- **Sprint Description**: Short Desc of the sprint. i.e. "Setup product codebase", "Complete user management's basic features".
- **Sprint State**: Current state of the sprint. States are: `planned`, `active`, `completed`, `archived`.
- **Sprint Start Date**: Start date of the sprint. Generated by ppp when sprint is created.
- **Sprint End Date**: End date of the sprint. Keep it blank if sprint is not completed.
- **Sprint Issues**: List of issues in the sprint.
- **Sprint Velocity**: Number of issues completed in the sprint.

**Sprint Workflow**: PPP maintains a single active sprint constraint - only one sprint can be active at a time. Sprint states transition as follows: `planned` → `active` → `completed` → `archived`. When a sprint is activated, all previously active sprints are automatically moved to completed state.

2. **Sprint Indexing** the table index of all sprints are filed and managed by ppp in `.ppp/Release.md` file. It a list with entries includes sprint name (linking to sprint md file), start date, end date velocity, etc.

3. **Sprint Filing** all sprint files are generated when created and managed by ppp during sprint lifetime. the sprint file name goes like `Sprint-01.md`, `Sprint-02.md`, etc. It should includes all the sprint attributes, especially **Issues List** in the md file.

4. **Issue List** is used to track all issues in a sprint. It is a list of issues with their ID (linking to issue md file), name, status, assignee, etc. It should be updated when:
- an issue is added to a sprint
- an issue is removed from a sprint
- an issue is completed
- an issue is assigned to a different person
- an issue's important info is updated in any way

### Release
**Release** is a set of sprints that deliver a set of issues. As of now, only one release per project is supported. All the detailed information about an release is in its **Release File** which is located at `.ppp/Release.md`. It should includes all the release attributes (Release Goal, Begin Date and End Date), **Current Sprint** and **Sprint List** in the md file.

### Feature Bill
The **Feature Bill** serves as a hierarchical, structured index of all features within the product, organizing them by their nested layers to provide a clear overview of the product’s functional architecture. It maps out the relationships between features (Layer 1), sub-features (Layer 2), and granular features (Layer 3), aligning with the issue ID rules and folder structure defined for PPP.

#### **Purpose**
The Feature Bill enables teams to:
- Visualize the full hierarchy of the product’s features.
- Quickly locate specific features and their associated details (e.g., status, assignee, description).
- Understand parent-child relationships between nested layers (e.g., which Layer 2 features belong to a Layer 1 feature).
- Serve as a navigation hub linking to detailed `spec.md` files for each module/feature, and indirectly to related epics, user stories, tasks, or bugs nested within their folders.


#### **Hierarchical Structure**
The Feature Bill strictly follows the 3-layer structure of features, as defined by their Issue IDs and corresponding folder paths:

##### **1. Layer 1 Features**
- **Definition**: Top-level features that form the foundational structure of the product.
- **ID Format**: `F` + 2 fixed digits (e.g., `F01`, `F02`, ..., `F99`).
- **Folder Path**: Directly under the `.ppp` directory:
  `.ppp/F<XX>-<issue_name_keywords>/` (e.g., `.ppp/F01-admin_dashboard/`).
- **Associated File**: Each Layer 1 feature contains a `spec.md` file at `.ppp/F<XX>-<keywords>/spec.md`, which documents its attributes (ID, status, priority, description, etc.).


##### **2. Layer 2 Features**
- **Definition**: Sub-features nested under a specific Layer 1 feature, refining its functionality.
- **ID Format**: `F` + 4 fixed digits (first 2 digits = parent Layer 1 feature ID; last 2 digits = unique identifier for the Layer 2 item).
  Example: `F0102` (nested under Layer 1 feature `F01`).
- **Folder Path**: Nested within the parent Layer 1 feature’s folder:
  `.ppp/F<XX>-<parent_keywords>/F<XX>-<issue_name_keywords>/` (e.g., `.ppp/F01-admin_dashboard/F02-user_management/`).
- **Associated File**: A `spec.md` file at `.ppp/F<XX>-<parent_keywords>/F<XX>-<keywords>/spec.md` captures its details.


##### **3. Layer 3 Features**
- **Definition**: Granular features nested under a specific Layer 2 feature, representing detailed functional components.
- **ID Format**: `F` + 6 fixed digits (first 2 digits = parent Layer 1 feature ID; middle 2 digits = parent Layer 2 feature ID; last 2 digits = unique identifier for the Layer 3 feature).
  Example: `F010203` (nested under Layer 2 feature `F0102`, which is under Layer 1 feature `F01`).
- **Folder Path**: Nested within the parent Layer 2 feature’s folder:
  `.ppp/F<XX>-<layer1_keywords>/F<XX>-<layer2_keywords>/F<XX>-<issue_name_keywords>/` (e.g., `.ppp/F01-admin_dashboard/F02-user_management/F03-role_permissions/`).
- **Associated File**: A `spec.md` file at the above path documents its attributes.


#### **Content of the Feature Bill**
The Feature Bill is typically maintained as a structured markdown file (e.g., `.ppp/Feature_Bill.md`) and includes:

- A hierarchical list of all Layer 1, Layer 2, and Layer 3 items, organized by their parent-child relationships.
- For each item:
  - Its full Issue ID (e.g., `F01`, `F0102`, `F010203`).
  - A link to its folder path (for navigation to the `spec.md` file and nested issues).
  - Key attributes (abbreviated): status (e.g., "In Progress"), assignee, and a brief description.


#### **Relationship to Other Issues**
The Feature Bill acts as a root node for all module/feature-related work, as:
- Epics, user stories, and tasks (with IDs prefixed by `T`) are nested in the folders of their parent features (e.g., a task `T010201` lives in `.ppp/F01-<keywords>/F02-<keywords>/`).
- Bugs (with IDs prefixed by `B`) are similarly nested under their associated features or tasks.

Thus, the Feature Bill provides a clear starting point to trace from high-level modules down to granular tasks or bugs, ensuring full visibility into the product’s development workflow.

## Features

### **Config** Features
All the config related features are under `ppp config` command.

#### list config items
***config list*** command lists all the config items and their values. And it uses `list` sub command and goes like `ppp config list`.

#### set config item
***config set*** command sets a config item's value. And it uses `set` sub command and goes like `ppp config set <config_item> <config_value>`.

#### get config item
***config get*** command gets a config item's value. And it uses `get` sub command and goes like `ppp config get <config_item>`.

### **Issue** Features
All the issue related features are under `ppp issue` command.

#### create issue

***issue create*** command creates an issue with type, parent and name provided during the command execution. And it uses `create` sub command and goes like `ppp issue create <issue_type> [<parent_issue_id>] [<issue_name>]`.
- issue_type is requred and must be one of `feature`, `epic`, `story`, `task`, `bug`.
- if parent_issue_id or issue_name is not provided, it enters interactive-UI model.
  - prompt user to search and select the parent issue if any.
  - show the selected parent issue's info if any, and prompt user to input issue name.
- once both parent_issue_id and issue_name are resolved in interactive-UI or in command line, issue creation begins.

During **issue creation**, ppp will:
  - generate issue ID, issue name, name keywords, and create issue file/folder;
    - issue name is detailed issue name which will be filed in issue file.
    - issue name keywords is summarized and not-frequently-changed short desc of the issue. it is used for naming issue file and linking text in issue list of its parent issue list, sprint file and feature bill.
  - update its parent's issue list if any, etc.
  - update Feature Bill if the created issue is a feature.

**Naming Convention of Issue folders**
All issues create folders for extensibility and consistency, with each folder containing a `spec.md` file that documents the issue details.
  1. **Features (Folders with spec.md)**
    - **Layer 1 Features**:  Located directly under the `.ppp` folder, named as:  `F01-<issue_name_keywords>/`, `F02-<issue_name_keywords>/`, ..., `F12-<issue_name_keywords>/`
    - **Layer 2 Features**:  Nested under a specific Layer 1 feature folder, named as: `F01-<issue_name_keywords>/`, `F02-<issue_name_keywords>/`, ... (e.g., A Layer 2 feature "F0102" would be stored at `.ppp/F01-<issue_name_keywords>/F02-<issue_name_keywords>/`)
    - **Layer 3 Features**: Nested under a specific Layer 2 feature folder, named as: `F01-<issue_name_keywords>/`, `F02-<issue_name_keywords>/`, ... (e.g., A Layer 3 feature "F010201" would be stored at `.ppp/F01-<issue_name_keywords>/F02-<issue_name_keywords>/F01-<issue_name_keywords>/`)

  2. **Epics/User Stories/Tasks (Folders with spec.md)**
Epics, user stories, and tasks are created as folders, nested under the corresponding feature folder, with the following naming format: `T01-<issue_name_keywords>/`, `T02-<issue_name_keywords>/`, ...
  - Example 1: A task "T010201" would be stored at:
  `.ppp/F01-<issue_name_keywords>/F02-<issue_name_keywords>/T01-<issue_name_keywords>/spec.md`
  - Example 2: A Epic "T020502" would be stored at:
    `.ppp/F02-<issue_name_keywords>/F05-<issue_name_keywords>/T02-<issue_name_keywords>/spec.md`
  - Example 3: A Bug "B01020111" would be stored at:
  `.ppp/F01-<issue_name_keywords>/F02-<issue_name_keywords>/F01-<issue_name_keywords>/B11-<issue_name_keywords>/spec.md`

#### update issue
***issue update*** command only updates an issue's name, and sync the new issue name and newly generated name keywords to the related places including issue file/folder name, name in issue file, name in its parent's issue list, name in sprint and feature file. Especially emphasize that issue type cannot be changed once it is crreated, so that it can be deleted and recreated. the command uses `update` sub command and goes like `ppp issue update <issue_id> <new_issue_name>`.

During **issue updation**, ppp will:
- use new issue name to genreate name keywords
- update issue file/folder name with new name keywords;
- update issue name in issue file;
- update its parent's issue list if any, etc;
- update Feature Bill if the updated issue is a module/feature;
- update Sprint file if the issue has been assigned to a sprint;

If the other detailed issue attribute or description needs to be updated, user can directly edit the issue file.

#### delete issue
***issue delete*** command delete an issue record from all its related files and folders referencing the issue and move the issue file/folder to `.ppp/_archived` folder for backup/archiving purpose. the command uses `delete` sub command and goes like `ppp issue delete <issue_id>`.

During **issue deletion**, ppp will:
- move issue file/folder to `.ppp/_archived` folder;
- remove the issue record in its parent's issue list if any, etc;
- remove the issue record in Feature Bill if the deleted issue is a module/feature;
- remove the issue record in Sprint file if the issue has been assigned to a sprint;

#### put issue to sprint
***issue put*** command put an issue to a sprint with sprint no provided during the command execution. And it uses `put` sub command and goes like `ppp issue put <issue_id> <sprint_no>`.

During **issue put to sprint**, ppp will:
- update the issue's sprint assignedment to the sprint no in its issue file;
- update the issue's sprint assignment in its issue file;
- update the issue record in the sprint file to add the issue to the sprint's issue list;

### **Sprint** Features
All the sprint related features are under `ppp sprint` command.

#### create sprint
***sprint create*** command creates a sprint with description provided during the command execution. And it uses `create` sub command and goes like `ppp sprint create <sprint_desc>`.

During **sprint creation**, ppp will:
- generate **Sprint Name** which is like 'Sprint-<NO>', the ID increases starting from 01, 02, 03, ...;
- create a sprint file at `.ppp/Sprint-<NO>.md` includes sprint name, description, start date, end date, velocity, etc.;
- update Release file to add the sprint to the sprint list;

If the other detailed sprint attributes or comments needs to be updated, user can directly edit the sprint file.

#### delete sprint
***sprint delete*** command deletes a sprint with sprint no provided during the command execution. And it uses `delete` sub command and goes like `ppp sprint delete <sprint_no>`.

During **sprint updation**, ppp will:
- update all the issues assigned to the sprint to remove the sprint assignment if the sprint is in progress;
- delete a sprint file at `.ppp/Sprint-<NO>.md` if found;
- update Release file to remove the sprint from the sprint list;

#### activate sprint
***sprint activate*** command activates a sprint with sprint no provided during the command execution. And it uses `activate` sub command and goes like `ppp sprint activate <sprint_no>`.

During **sprint activation**, ppp will:
- update Release file to activate the sprint in the sprint list;
- update all the issues assigned to the sprint to set their status to 'In Progress';
